"use strict";(self.webpackChunkgulfin=self.webpackChunkgulfin||[]).push([[330],{8330:(tt,g,a)=>{a.r(g),a.d(g,{PretsModule:()=>V});var l=a(8583),c=a(6974),t=a(7716),A=a(9498),h=a(5897),v=a(6128);let x=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pret-layout"]],decls:8,vars:0,consts:[[1,"app-container","app-theme-white","body-tabs-shadow","fixed-header","fixed-sidebar"],[1,"app-main"],[1,"app-main__outer"],[1,"app-main__inner"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-header"),t.TgZ(2,"div",1),t._UZ(3,"app-sidebar"),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t._UZ(6,"router-outlet"),t.qZA(),t._UZ(7,"app-footer"),t.qZA(),t.qZA(),t.qZA())},directives:[A.G,h.k,c.lC,v.c],styles:[""]}),n})();var i=a(665),m=a(6215),Z=a(5917),_=a(8002),f=a(9761),T=a(5304),p=a(5399),q=a(6521),C=a(1982),y=a(1824),U=a(7874),u=a(9966);function I(n,o){if(1&n&&(t.TgZ(0,"option",28),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"titlecase"),t.qZA()),2&n){const e=o.$implicit;t.s9C("ngValue",e.userId),t.xp6(1),t.AsE("",t.lcZ(2,3,e.firstName),"\xa0",t.lcZ(3,5,e.lastName),"")}}function b(n,o){1&n&&(t.TgZ(0,"option",29),t._uU(1,"Aucun membre trouv\xe9"),t.qZA())}function P(n,o){1&n&&(t.ynx(0,33),t.TgZ(1,"div",34),t.TgZ(2,"div",35),t._UZ(3,"div",36),t.qZA(),t.qZA(),t.BQk())}function S(n,o){if(1&n&&(t.TgZ(0,"tbody"),t.TgZ(1,"tr"),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"titlecase"),t.ALo(10,"titlecase"),t.qZA(),t.TgZ(11,"td",45),t.TgZ(12,"span"),t._UZ(13,"i",46),t._uU(14),t.ALo(15,"number"),t.qZA(),t.qZA(),t.TgZ(16,"td",47),t.TgZ(17,"span"),t._UZ(18,"i",48),t._uU(19),t.ALo(20,"number"),t.qZA(),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.ALo(23,"date"),t.qZA(),t.TgZ(24,"td"),t._uU(25),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA(),t.TgZ(28,"td"),t._uU(29),t.ALo(30,"date"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.ALo(33,"date"),t.qZA(),t.qZA(),t.qZA()),2&n){const e=o.$implicit,r=o.index;t.xp6(3),t.Oqu(r+1),t.xp6(2),t.Oqu(t.xi3(6,13,e.seance.date,"dd-MM-yyyy")),t.xp6(3),t.AsE("",t.lcZ(9,16,e.user.firstName),"\xa0",t.lcZ(10,18,e.user.lastName),""),t.xp6(6),t.hij("\xa0",t.xi3(15,20,e.montant_prete,"1.2-2"),"\xa0\u20ac"),t.xp6(2),t.Q6J("ngClass","PRET"!=e.typeTransaction.name?"text-success":"text-warning"),t.xp6(2),t.Q6J("ngClass","PRET"!=e.typeTransaction.name?"fa-arrow-up":"fa-minus"),t.xp6(1),t.hij("\xa0",t.xi3(20,23,e.montant_rembourse,"1.2-2"),"\xa0\u20ac"),t.xp6(3),t.Oqu(t.xi3(23,26,e.dateRemboursement,"dd-MM-yyyy")),t.xp6(3),t.Oqu(e.typeTransaction.name),t.xp6(2),t.Oqu(e.statutPret.name),t.xp6(2),t.Oqu(t.xi3(30,29,e.createdAt,"dd-MM-yyyy \xe0 HH:mm")),t.xp6(3),t.Oqu(t.xi3(33,32,e.updatedAt,"dd-MM-yyyy \xe0 HH:mm"))}}function E(n,o){1&n&&(t.TgZ(0,"p",49),t._uU(1,"Aucun pr\xeat trouv\xe9 !"),t.qZA())}const F=function(n,o,e){return{id:"pret",itemsPerPage:n,currentPage:o,totalItems:e}};function M(n,o){if(1&n){const e=t.EpF();t.ynx(0,37),t.TgZ(1,"table",38),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Date"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Membre"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Montant Pret\xe9"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Montant Rembours\xe9"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Date de Remboursement"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Type de transaction"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Statut"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Date de cr\xe9ation"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Date de modification"),t.qZA(),t.qZA(),t.qZA(),t.YNc(24,S,34,35,"tbody",39),t.ALo(25,"paginate"),t.qZA(),t.TgZ(26,"div",40),t.YNc(27,E,2,0,"p",41),t.qZA(),t.TgZ(28,"div",42),t.TgZ(29,"div",43),t.TgZ(30,"div",12),t._uU(31," Total : "),t.TgZ(32,"b"),t._uU(33),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",11),t.TgZ(35,"div",12),t.TgZ(36,"pagination-controls",44),t.NdJ("pageChange",function(s){return t.CHM(e),t.oxw(2).pageChange(s)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().ngIf,r=t.oxw();t.xp6(24),t.Q6J("ngForOf",t.xi3(25,3,e.appData.content,t.kEZ(6,F,e.appData.size,r.page,e.appData.totalElements))),t.xp6(3),t.Q6J("ngIf",!e.appData.content.length),t.xp6(6),t.hij("",e.appData.totalElements," ")}}function J(n,o){if(1&n&&(t.ynx(0,33),t.TgZ(1,"div",50),t.TgZ(2,"div",51),t._uU(3),t.qZA(),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf;t.xp6(3),t.Oqu(e.error)}}function L(n,o){if(1&n&&(t.ynx(0,30),t.YNc(1,P,4,0,"ng-container",31),t.YNc(2,M,37,10,"ng-container",32),t.YNc(3,J,4,1,"ng-container",31),t.BQk()),2&n){const e=o.ngIf,r=t.oxw();t.Q6J("ngSwitch",e.dataState),t.xp6(1),t.Q6J("ngSwitchCase",r.DataState.LOADING_STATE),t.xp6(1),t.Q6J("ngSwitchCase",r.DataState.LOADED_STATE),t.xp6(1),t.Q6J("ngSwitchCase",r.DataState.ERROR_STATE)}}function N(n,o){1&n&&(t.TgZ(0,"div",77),t._uU(1," la date de la transaction est requise. "),t.qZA())}function O(n,o){1&n&&(t.TgZ(0,"div",77),t._uU(1," entrez une date valide "),t.qZA())}function Q(n,o){if(1&n&&(t.TgZ(0,"div",75),t.YNc(1,N,2,0,"div",76),t.YNc(2,O,2,0,"div",76),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.pretForm.controls.date.errors?null:e.pretForm.controls.date.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.pretForm.controls.date.errors?null:e.pretForm.controls.date.errors.pattern)}}function D(n,o){1&n&&(t.TgZ(0,"div",77),t._uU(1," le montant de la transaction est requis. "),t.qZA())}function w(n,o){1&n&&(t.TgZ(0,"div",77),t._uU(1," entrez un montant valide "),t.qZA())}function Y(n,o){1&n&&(t.TgZ(0,"div",77),t._uU(1," le montat doit \xeatre sup\xe9rieur \xe0 0 "),t.qZA())}function R(n,o){if(1&n&&(t.TgZ(0,"div",75),t.YNc(1,D,2,0,"div",76),t.YNc(2,w,2,0,"div",76),t.YNc(3,Y,2,0,"div",76),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.pretForm.controls.montant.errors?null:e.pretForm.controls.montant.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.pretForm.controls.montant.errors?null:e.pretForm.controls.montant.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==e.pretForm.controls.montant.errors?null:e.pretForm.controls.montant.errors.min)}}function $(n,o){1&n&&(t.TgZ(0,"div",77),t._uU(1," faites un choix. "),t.qZA())}function z(n,o){if(1&n&&(t.TgZ(0,"div",75),t.YNc(1,$,2,0,"div",76),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.pretForm.controls.type.errors?null:e.pretForm.controls.type.errors.type)}}function B(n,o){1&n&&t._UZ(0,"i",78)}function j(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Enregistrement ..."),t.qZA())}function k(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Enregistrer"),t.qZA())}function H(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",52),t.TgZ(1,"h6",53),t.TgZ(2,"b"),t._uU(3,"Remboursement du pr\xeat"),t.qZA(),t.qZA(),t.TgZ(4,"div",54),t.NdJ("click",function(){return t.CHM(e).$implicit.close("save click")}),t.TgZ(5,"p"),t._UZ(6,"i",55),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",56),t.TgZ(8,"div",57),t.TgZ(9,"div",57),t.TgZ(10,"form",58),t.TgZ(11,"div",59),t.TgZ(12,"label",60),t._uU(13,"Date du remboursement"),t.qZA(),t._UZ(14,"input",61),t.qZA(),t.YNc(15,Q,3,2,"div",62),t.TgZ(16,"div",59),t.TgZ(17,"label",63),t._uU(18,"Montant du remboursement"),t.qZA(),t._UZ(19,"input",64),t.qZA(),t.YNc(20,R,4,3,"div",62),t.TgZ(21,"div",59),t.TgZ(22,"label",63),t._uU(23,"Le pr\xeat est-il rembours\xe9 en totalit\xe9 ou en partialit\xe9?"),t.qZA(),t.TgZ(24,"div"),t.TgZ(25,"div",65),t._UZ(26,"input",66),t.TgZ(27,"label",67),t._uU(28,"Partiel"),t.qZA(),t.qZA(),t.TgZ(29,"div",65),t._UZ(30,"input",68),t.TgZ(31,"label",69),t._uU(32,"Total"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(33,z,2,1,"div",62),t.TgZ(34,"button",70),t.NdJ("click",function(){return t.CHM(e),t.oxw().annuler()}),t._UZ(35,"i",71),t._uU(36," Annuler "),t.qZA(),t.TgZ(37,"button",72),t.NdJ("click",function(){return t.CHM(e),t.oxw().rembourser()}),t.ALo(38,"async"),t.YNc(39,B,1,0,"i",73),t.ALo(40,"async"),t._uU(41,"\xa0 "),t.YNc(42,j,2,0,"span",74),t.ALo(43,"async"),t.YNc(44,k,2,0,"span",74),t.ALo(45,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(10),t.Q6J("formGroup",e.pretForm),t.xp6(5),t.Q6J("ngIf",e.pretForm.controls.date.invalid&&(e.pretForm.controls.date.dirty||e.pretForm.controls.date.touched)),t.xp6(5),t.Q6J("ngIf",e.pretForm.controls.montant.invalid&&(e.pretForm.controls.montant.dirty||e.pretForm.controls.montant.touched)),t.xp6(13),t.Q6J("ngIf",e.pretForm.controls.type.invalid&&(e.pretForm.controls.type.dirty||e.pretForm.controls.type.touched)),t.xp6(4),t.Q6J("disabled",e.pretForm.invalid||t.lcZ(38,8,e.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(40,10,e.isLoading$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(43,12,e.isLoading$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(45,14,e.isLoading$))}}const G=[{path:"",component:x,children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:(()=>{class n{constructor(e,r,s,d,W){this.fb=e,this.modalService=r,this.notifService=s,this.userService=d,this.pretService=W,this.DataState=p.a,this.dataSubjects=new m.X(null),this.isLoading=new m.X(!1),this.isLoading$=this.isLoading.asObservable(),this.modalTitle="Enregistrer un nouveau carton",this.page=1,this.size=20,this.roleUser=localStorage.getItem("userAccount").toString(),this.options=[{name:"Partiel",value:!1},{name:"Total",value:!0}],this.loadUser=!1,this.date="",this.userFilter="",this.statusFilter=""}ngOnInit(){this.formMangwa(),this.getPrets(),this.getUsers()}formMangwa(){this.pretForm=this.fb.group({date:["",[i.kI.required]],montant:["",[i.kI.required,i.kI.pattern(/^\d+(\.\d{1,2})?$/),i.kI.min(1)]],type:["",[i.kI.required]]})}getPrets(){this.appState$=this.pretService.prets$(this.userFilter,this.statusFilter,this.date,this.page-1,this.size).pipe((0,_.U)(e=>(this.dataSubjects.next(e),this.notifService.onSuccess("chargement des pr\xeats"),{dataState:p.a.LOADED_STATE,appData:e})),(0,f.O)({dataState:p.a.LOADING_STATE,appData:null}),(0,T.K)(e=>(0,Z.of)({dataState:p.a.ERROR_STATE,error:e})))}getUsers(){this.loadUser=!0,this.userService.getUserss().subscribe(e=>{this.loadUser=!1,this.users=e})}rembourser(){this.isLoading.next(!0),this.pret.idUser=this.selectedPret.idUser,this.pret.dateRemboursement=this.pretForm.controls.date.value,this.pret.montant_rembourse=this.pretForm.controls.montant.value,this.pret.total=this.pretForm.controls.type.value,this.appState$=this.pretService.rembourserPret$(this.pret,this.selectedPret.idPret).pipe((0,_.U)(e=>(this.annuler(),this.isLoading.next(!1),this.notifService.onSuccess("pr\xeat rembours\xe9"),this.getPrets(),{dataState:p.a.LOADED_STATE,appData:null})),(0,f.O)({dataState:p.a.LOADED_STATE,appData:this.dataSubjects.value}),(0,T.K)(e=>(this.isLoading.next(!1),(0,Z.of)({dataState:p.a.ERROR_STATE,error:e}))))}annuler(){this.formMangwa(),this.pretForm.reset(),this.modalService.dismissAll()}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",size:"lg"})}updateCarton(){}pageChange(e){this.page=e,this.getPrets()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.qu),t.Y36(q.FF),t.Y36(C.y),t.Y36(y.f),t.Y36(U.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pret-index"]],decls:45,vars:8,consts:[[1,"app-page-title"],[1,"page-title-wrapper"],[1,"page-title-heading"],[1,"page-title-icon"],[1,"pe-7s-box1","icon-gradient","bg-night-fade"],[1,"page-title-subheading"],[1,"row"],[1,"col-md-12"],["id","htmlData",1,"main-card","mb-3","card"],["htmlData",""],[1,"card-header"],[1,"btn-actions-pane-right"],["role","group",1,"btn-group-sm","btn-group"],["role","group",1,""],[1,"form-row"],[1,"position-relative","mr-2"],["name","mag","id","mag",1,"form-control","form-control-sm","mr-3",3,"ngModel","ngModelChange"],["value","","selected","","disabled","","hidden",""],[3,"ngValue",4,"ngFor","ngForOf"],["value","","disabled","",4,"ngIf"],["value",""],["name","stat","id","statut",1,"form-control","form-control-sm","mr-3",3,"ngModel","ngModelChange"],["value","PRET"],["value","REMBOURSEMENT"],["type","date","name","date","id","date","placeholder","Rechercher date",1,"form-control","form-control-sm","mr-3",3,"ngModel","ngModelChange"],[1,"table-responsive"],["class","bg-white",3,"ngSwitch",4,"ngIf"],["mymodal",""],[3,"ngValue"],["value","","disabled",""],[1,"bg-white",3,"ngSwitch"],["class","bg-white",4,"ngSwitchCase"],["class","bg-white py-1 px-1",4,"ngSwitchCase"],[1,"bg-white"],[1,"col-md-12","text-center","my-3"],[1,"ball-clip-rotate"],[2,"background-color","rgb(68, 64, 84)"],[1,"bg-white","py-1","px-1"],[1,"table","table-hover","bg-white"],[4,"ngFor","ngForOf"],[1,"text-center"],["style","color: grey; font-size: 1.8rem;","class","mx-auto",4,"ngIf"],[1,"card-footer"],[1,"btn-actions-pane-left"],["id","pret","previousLabel","Pr\xe9c\xe9dent","nextLabel","Suivant",3,"pageChange"],[1,"text-left","font-weight-bold","text-danger"],[1,"fa","fa-arrow-down"],[1,"text-left","font-weight-bold",3,"ngClass"],[1,"fa",3,"ngClass"],[1,"mx-auto",2,"color","grey","font-size","1.8rem"],[1,"col-md-12","text-center"],[1,"text-danger"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title","timeline-title"],[1,"close","vertical-timeline-element-content","bounce-in",3,"click"],[1,"fa","fa-times"],[1,"modal-body"],[1,""],[3,"formGroup"],[1,"position-relative","form-group"],["for","date",1,""],["type","date","id","date","formControlName","date","placeholder","date de la transaction",1,"form-control"],["class","mb-2","style","color: #f65656; font-style: italic;",4,"ngIf"],["for","montant",1,""],["type","text","id","montant","formControlName","montant","placeholder","montant de la transaction",1,"form-control"],[1,"custom-radio","custom-control","custom-control-inline"],["type","radio","name","yo","formControlName","type","value","false","id","exampleCustomInline",1,"custom-control-input"],["for","exampleCustomInline",1,"custom-control-label"],["type","radio","name","yo","formControlName","type","value","true","id","exampleCustomInline2",1,"custom-control-input"],["for","exampleCustomInline2",1,"custom-control-label"],[1,"mt-1","btn","btn-secondary","float-right","ml-3",3,"click"],[1,"pe-7s-back"],[1,"mt-1","btn","btn-primary","float-right",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[4,"ngIf"],[1,"mb-2",2,"color","#f65656","font-style","italic"],["class","ml-3",4,"ngIf"],[1,"ml-3"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._UZ(4,"i",4),t.qZA(),t.TgZ(5,"div"),t._uU(6,"Gestion des pr\xeats "),t.TgZ(7,"div",5),t._uU(8,"Managez vos pr\xeats"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"div",7),t.TgZ(11,"div",8,9),t.TgZ(13,"div",10),t._uU(14," Liste des pr\xeats "),t.TgZ(15,"div",11),t._UZ(16,"div",12),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"div",13),t.TgZ(19,"form",14),t.TgZ(20,"div",15),t.TgZ(21,"select",16),t.NdJ("ngModelChange",function(d){return r.userFilter=d})("ngModelChange",function(){return r.getPrets()}),t.TgZ(22,"option",17),t._uU(23,"S\xe9lectionner un membre"),t.qZA(),t.YNc(24,I,4,7,"option",18),t.YNc(25,b,2,0,"option",19),t.TgZ(26,"option",20),t._uU(27,"Tout afficher"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",15),t.TgZ(29,"select",21),t.NdJ("ngModelChange",function(d){return r.statusFilter=d})("ngModelChange",function(){return r.getPrets()}),t.TgZ(30,"option",17),t._uU(31,"Choix statut"),t.qZA(),t.TgZ(32,"option",22),t._uU(33,"PRET"),t.qZA(),t.TgZ(34,"option",23),t._uU(35,"REMBOURSEMENT"),t.qZA(),t.TgZ(36,"option",20),t._uU(37,"Tout afficher"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",15),t.TgZ(39,"input",24),t.NdJ("ngModelChange",function(d){return r.date=d})("ngModelChange",function(){return r.getPrets()}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",25),t.YNc(41,L,4,4,"ng-container",26),t.ALo(42,"async"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(43,H,46,16,"ng-template",null,27,t.W1O)),2&e&&(t.xp6(21),t.Q6J("ngModel",r.userFilter),t.xp6(3),t.Q6J("ngForOf",null==r.users?null:r.users.content),t.xp6(1),t.Q6J("ngIf",!r.loadUser&&0==r.users.totalElements),t.xp6(4),t.Q6J("ngModel",r.statusFilter),t.xp6(10),t.Q6J("ngModel",r.date),t.xp6(2),t.Q6J("ngIf",t.lcZ(42,6,r.appState$)))},directives:[i._Y,i.JL,i.F,i.EJ,i.JJ,i.On,i.YN,i.Kr,l.sg,l.O5,i.Fj,l.RF,l.n9,u.LS,l.mk,i.sg,i.u,i._],pipes:[l.Ov,l.rS,u._s,l.uU,l.JJ],styles:[""]}),n})()}]}];let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(G)],c.Bz]}),n})();var K=a(5291);let V=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,X,K.m,u.JX,i.UX,i.u5]]}),n})()}}]);